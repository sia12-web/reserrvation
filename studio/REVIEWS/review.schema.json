{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Agent Review",
    "type": "object",
    "properties": {
        "review_id": {
            "type": "string",
            "format": "uuid"
        },
        "step_id": {
            "type": "string"
        },
        "run_id": {
            "type": "string"
        },
        "status": {
            "type": "string",
            "enum": [
                "approved",
                "approved_with_conditions",
                "changes_requested",
                "blocked"
            ]
        },
        "checklist": {
            "type": "object",
            "properties": {
                "correctness": {
                    "type": "boolean"
                },
                "security": {
                    "type": "boolean"
                },
                "performance": {
                    "type": "boolean"
                },
                "api_compatibility": {
                    "type": "boolean"
                },
                "tests_passed": {
                    "type": "boolean"
                },
                "observability": {
                    "type": "boolean"
                },
                "migration_safety": {
                    "type": "boolean"
                },
                "ux_consistency": {
                    "type": "boolean"
                }
            },
            "required": [
                "correctness",
                "security",
                "tests_passed"
            ]
        },
        "required_fixes": {
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "diff_risk_notes": {
            "type": "array",
            "items": {
                "type": "string"
            }
        },
        "conditions": {
            "type": "array",
            "items": {
                "type": "string"
            }
        }
    },
    "required": [
        "status",
        "checklist"
    ]
}